{
    "sourceFile": "src/admin/pages/AccessControl.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 15,
            "patches": [
                {
                    "date": 1751537683844,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1751544805651,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,19 +19,56 @@\n   };\r\n \r\n   return (\r\n     <AdminLayout>\r\n-      <h1 className=\"text-2xl font-bold mb-4\">Access Control</h1>\r\n-      <div className=\"mb-4\">\r\n-        <input className=\"border p-2 mr-2\" placeholder=\"Email\" value={email} onChange={e => setEmail(e.target.value)} />\r\n-        <input className=\"border p-2 mr-2\" placeholder=\"Password\" type=\"password\" value={password} onChange={e => setPassword(e.target.value)} />\r\n-        <select className=\"border p-2 mr-2\" value={role} onChange={e => setRole(e.target.value)}>\r\n-          <option value=\"cashier\">Cashier</option>\r\n-          <option value=\"admin\">Admin</option>\r\n-        </select>\r\n-        <button className=\"bg-blue-500 text-white px-4 py-2 rounded\" onClick={handleAdd}>Add</button>\r\n+      <div className=\"bg-gradient-to-br from-pink-100 to-pink-200 rounded-xl p-6 mb-8 shadow-inner\">\r\n+        <h1 className=\"text-3xl font-extrabold text-pink-800\">Access Control</h1>\r\n       </div>\r\n+\r\n+      <div className=\"bg-white p-6 rounded-xl shadow-md space-y-4\">\r\n+        <div>\r\n\\ No newline at end of file\n+          <label className=\"block font-semibold mb-1 text-gray-700\">Email</label>\r\n+          <input\r\n+            className=\"border p-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-pink-400\"\r\n+            placeholder=\"Email\"\r\n+            value={email}\r\n+            onChange={(e) => setEmail(e.target.value)}\r\n+          />\r\n+        </div>\r\n+\r\n+        <div>\r\n+          <label className=\"block font-semibold mb-1 text-gray-700\">Password</label>\r\n+          <input\r\n+            className=\"border p-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-pink-400\"\r\n+            placeholder=\"Password\"\r\n+            type=\"password\"\r\n+            value={password}\r\n+            onChange={(e) => setPassword(e.target.value)}\r\n+          />\r\n+        </div>\r\n+\r\n+        <div>\r\n+          <label className=\"block font-semibold mb-1 text-gray-700\">Role</label>\r\n+          <select\r\n+            className=\"border p-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-pink-400\"\r\n+            value={role}\r\n+            onChange={(e) => setRole(e.target.value)}\r\n+          >\r\n+            <option value=\"cashier\">Cashier</option>\r\n+            <option value=\"admin\">Admin</option>\r\n+          </select>\r\n+        </div>\r\n+\r\n+        <div className=\"flex justify-end\">\r\n+          <button\r\n+            className=\"bg-pink-500 hover:bg-pink-600 text-white px-6 py-2 rounded-lg transition shadow-md\"\r\n+            onClick={handleAdd}\r\n+          >\r\n+            Add User\r\n+          </button>\r\n+        </div>\r\n+      </div>\r\n     </AdminLayout>\r\n   );\r\n };\r\n \r\n-export default AccessControl;\n+export default AccessControl;\r\n"
                },
                {
                    "date": 1751602650170,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,6 @@\n import React, { useState } from \"react\";\r\n+import { toast } from 'react-toastify';\r\n import AdminLayout from \"../components/AdminLayout\";\r\n \r\n const AccessControl = () => {\r\n   const [email, setEmail] = useState(\"\");\r\n@@ -70,5 +71,5 @@\n     </AdminLayout>\r\n   );\r\n };\r\n \r\n-export default AccessControl;\n\\ No newline at end of file\n+export default AccessControl;\r\n"
                },
                {
                    "date": 1751602676618,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,16 +8,58 @@\n   const [role, setRole] = useState(\"cashier\");\r\n   const token = localStorage.getItem(\"token\");\r\n \r\n   const handleAdd = async () => {\r\n-    await fetch(`${import.meta.env.VITE_AUTH_API_URL}/admin/add-user`, {\r\n-      method: \"POST\",\r\n-      headers: { Authorization: `Bearer ${token}`, \"Content-Type\": \"application/json\" },\r\n-      body: JSON.stringify({ email, password, role }),\r\n-    });\r\n-    alert(\"User added!\");\r\n-    setEmail(\"\");\r\n-    setPassword(\"\");\r\n+    // Validation\r\n+    if (!email.trim()) {\r\n+      toast.error('Email is required');\r\n+      return;\r\n+    }\r\n+    \r\n+    // Email validation\r\n+    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n+    if (!emailRegex.test(email)) {\r\n+      toast.error('Please enter a valid email address');\r\n+      return;\r\n+    }\r\n+    \r\n+    if (!password.trim()) {\r\n+      toast.error('Password is required');\r\n+      return;\r\n+    }\r\n+    \r\n+    if (password.length < 6) {\r\n+      toast.error('Password must be at least 6 characters long');\r\n+      return;\r\n+    }\r\n+    \r\n+    if (!role) {\r\n+      toast.error('Role is required');\r\n+      return;\r\n+    }\r\n+    \r\n+    try {\r\n+      const response = await fetch(`${import.meta.env.VITE_AUTH_API_URL}/admin/add-user`, {\r\n+        method: \"POST\",\r\n+        headers: { \r\n+          Authorization: `Bearer ${token}`, \r\n+          \"Content-Type\": \"application/json\" \r\n+        },\r\n+        body: JSON.stringify({ email, password, role }),\r\n+      });\r\n+      \r\n+      if (response.ok) {\r\n+        toast.success(`User with role \"${role}\" added successfully!`);\r\n+        setEmail(\"\");\r\n+        setPassword(\"\");\r\n+        setRole(\"cashier\");\r\n+      } else {\r\n+        const errorData = await response.json();\r\n+        toast.error(`Failed to add user: ${errorData.error || 'Unknown error'}`);\r\n+      }\r\n+    } catch (error) {\r\n+      toast.error('Network error occurred while adding user');\r\n+    }\r\n   };\r\n \r\n   return (\r\n     <AdminLayout>\r\n"
                },
                {
                    "date": 1751622083465,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,9 +8,8 @@\n   const [role, setRole] = useState(\"cashier\");\r\n   const token = localStorage.getItem(\"token\");\r\n \r\n   const handleAdd = async () => {\r\n-    // Validation\r\n     if (!email.trim()) {\r\n       toast.error('Email is required');\r\n       return;\r\n     }\r\n"
                },
                {
                    "date": 1753702269769,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,73 +1,166 @@\n-import React, { useState } from \"react\";\r\n-import { toast } from 'react-toastify';\r\n+import React, { useState, useEffect } from \"react\";\r\n+import { toast, ToastContainer } from \"react-toastify\";\r\n+import { FaCheck, FaTimes, FaPen, FaTrash, FaSortDown, FaPlus, FaUserPlus } from \"react-icons/fa\";\r\n+import { IoIosArrowRoundDown } from \"react-icons/io\";\r\n+import { RiEdit2Line } from \"react-icons/ri\";\r\n+import \"react-toastify/dist/ReactToastify.css\";\r\n+\r\n import AdminLayout from \"../components/AdminLayout\";\r\n \r\n const AccessControl = () => {\r\n   const [email, setEmail] = useState(\"\");\r\n   const [password, setPassword] = useState(\"\");\r\n   const [role, setRole] = useState(\"cashier\");\r\n+  const [showAddForm, setShowAddForm] = useState(false);\r\n+  const [loading, setLoading] = useState(false);\r\n+  const [users, setUsers] = useState([]);\r\n   const token = localStorage.getItem(\"token\");\r\n \r\n-  const handleAdd = async () => {\r\n-    if (!email.trim()) {\r\n-      toast.error('Email is required');\r\n-      return;\r\n-    }\r\n-    \r\n-    // Email validation\r\n-    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n-    if (!emailRegex.test(email)) {\r\n-      toast.error('Please enter a valid email address');\r\n-      return;\r\n-    }\r\n-    \r\n-    if (!password.trim()) {\r\n-      toast.error('Password is required');\r\n-      return;\r\n-    }\r\n-    \r\n-    if (password.length < 6) {\r\n-      toast.error('Password must be at least 6 characters long');\r\n-      return;\r\n-    }\r\n-    \r\n-    if (!role) {\r\n-      toast.error('Role is required');\r\n-      return;\r\n-    }\r\n-    \r\n-    try {\r\n-      const response = await fetch(`${import.meta.env.VITE_AUTH_API_URL}/admin/add-user`, {\r\n-        method: \"POST\",\r\n-        headers: { \r\n-          Authorization: `Bearer ${token}`, \r\n-          \"Content-Type\": \"application/json\" \r\n-        },\r\n-        body: JSON.stringify({ email, password, role }),\r\n-      });\r\n-      \r\n-      if (response.ok) {\r\n-        toast.success(`User with role \"${role}\" added successfully!`);\r\n-        setEmail(\"\");\r\n-        setPassword(\"\");\r\n-        setRole(\"cashier\");\r\n-      } else {\r\n-        const errorData = await response.json();\r\n-        toast.error(`Failed to add user: ${errorData.error || 'Unknown error'}`);\r\n-      }\r\n-    } catch (error) {\r\n-      toast.error('Network error occurred while adding user');\r\n-    }\r\n-  };\r\n+  // const handleAdd = async () => {\r\n+  //   if (!email.trim()) {\r\n+  //     toast.error('Email is required');\r\n+  //     return;\r\n+  //   }\r\n \r\n+  //   const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n+  //   if (!emailRegex.test(email)) {\r\n+  //     toast.error('Please enter a valid email address');\r\n+  //     return;\r\n+  //   }\r\n+\r\n+  //   if (!password.trim()) {\r\n+  //     toast.error('Password is required');\r\n+  //     return;\r\n+  //   }\r\n+\r\n+  //   if (password.length < 6) {\r\n+  //     toast.error('Password must be at least 6 characters long');\r\n+  //     return;\r\n+  //   }\r\n+\r\n+  //   if (!role) {\r\n+  //     toast.error('Role is required');\r\n+  //     return;\r\n+  //   }\r\n+\r\n+  //   try {\r\n+  //     const response = await fetch(`${import.meta.env.VITE_AUTH_API_URL}/admin/add-user`, {\r\n+  //       method: \"POST\",\r\n+  //       headers: {\r\n+  //         Authorization: `Bearer ${token}`,\r\n+  //         \"Content-Type\": \"application/json\"\r\n+  //       },\r\n+  //       body: JSON.stringify({ email, password, role }),\r\n+  //     });\r\n+\r\n+  //     if (response.ok) {\r\n+  //       toast.success(`User with role \"${role}\" added successfully!`);\r\n+  //       setEmail(\"\");\r\n+  //       setPassword(\"\");\r\n+  //       setRole(\"cashier\");\r\n+  //     } else {\r\n+  //       const errorData = await response.json();\r\n+  //       toast.error(`Failed to add user: ${errorData.error || 'Unknown error'}`);\r\n+  //     }\r\n+  //   } catch (error) {\r\n+  //     toast.error('Network error occurred while adding user');\r\n+  //   }\r\n+  // };\r\n+  const rolesData = [\r\n+    {\r\n+      role: \"User\",\r\n+      accessUserDetails: true,\r\n+      accessTransactions: true,\r\n+      cms: true,\r\n+    },\r\n+    {\r\n+      role: \"Admin\",\r\n+      accessUserDetails: true,\r\n+      accessTransactions: false,\r\n+      cms: false,\r\n+    },\r\n+    {\r\n+      role: \"Cashier\",\r\n+      accessUserDetails: false,\r\n+      accessTransactions: true,\r\n+      cms: true,\r\n+    },\r\n+  ];\r\n+\r\n   return (\r\n     <AdminLayout>\r\n-      <div className=\"bg-gradient-to-br from-pink-100 to-pink-200 rounded-xl p-6 mb-8 shadow-inner\">\r\n-        <h1 className=\"text-3xl font-extrabold text-pink-800\">Access Control</h1>\r\n+      <div className=\"bg-white rounded-xl p-4 shadow-sm max-w-6xl mx-auto mt-10\">\r\n+        <table className=\"w-full text-sm text-left border-collapse\">\r\n+          <thead>\r\n+            <tr className=\"text-gray-700 text-sm font-semibold border-gray-200\">\r\n+              <th className=\"px-4 py-3\">\r\n+                <div className=\"flex items-center gap-1\">\r\n+                  ROLE <IoIosArrowRoundDown />\r\n+                </div>\r\n+              </th>\r\n+              <th className=\"px-4 py-3\">\r\n+                <div className=\"flex items-center gap-1\">\r\n+                  ACCESS TO USER DETAILS <IoIosArrowRoundDown />\r\n+                </div>\r\n+              </th>\r\n+              <th className=\"px-4 py-3\">\r\n+                <div className=\"flex items-center gap-1\">\r\n+                  ACCESS TO USER TRANSACTIONS <IoIosArrowRoundDown />\r\n+                </div>\r\n+              </th>\r\n+              <th className=\"px-4 py-3\">\r\n+                <div className=\"flex items-center gap-1\">\r\n+                  CMS <IoIosArrowRoundDown />\r\n+                </div>\r\n+              </th>\r\n+              <th className=\"px-4 py-3\">\r\n+                <div className=\"flex items-center gap-1\">\r\n+                  ACTIONS <IoIosArrowRoundDown />\r\n+                </div>\r\n+              </th>\r\n+            </tr>\r\n+          </thead>\r\n+          <tbody>\r\n+            {rolesData.map((item, index) => (\r\n+              <tr key={index} className=\"border-gray-200 hover:bg-gray-50\">\r\n+                <td className=\"px-4 py-3 text-gray-800\">{item.role}</td>\r\n+                <td className=\"px-4 py-3 text-center\">\r\n+                  {item.accessUserDetails ? (\r\n+                    <FaCheck className=\"text-green-500 inline\" />\r\n+                  ) : (\r\n+                    <FaTimes className=\"text-red-500 inline\" />\r\n+                  )}\r\n+                </td>\r\n+                <td className=\"px-4 py-3 text-center\">\r\n+                  {item.accessTransactions ? (\r\n+                    <FaCheck className=\"text-green-500 inline\" />\r\n+                  ) : (\r\n+                    <FaTimes className=\"text-red-500 inline\" />\r\n+                  )}\r\n+                </td>\r\n+                <td className=\"px-4 py-3 text-center\">\r\n+                  {item.cms ? (\r\n+                    <FaCheck className=\"text-green-500 inline\" />\r\n+                  ) : (\r\n+                    <FaTimes className=\"text-red-500 inline\" />\r\n+                  )}\r\n+                </td>\r\n+                <td className=\"px-4 py-3 flex items-center justify-center gap-2\">\r\n+                  <button className=\"p-2 rounded bg-blue-100 text-blue-700 hover:bg-blue-200\">\r\n+                    <RiEdit2Line />\r\n+                  </button>\r\n+                  <button className=\"p-2 rounded bg-red-100 text-red-600 hover:bg-red-200\">\r\n+                    <FaTrash />\r\n+                  </button>\r\n+                </td>\r\n+              </tr>\r\n+            ))}\r\n+          </tbody>\r\n+        </table>\r\n       </div>\r\n \r\n-      <div className=\"bg-white p-6 rounded-xl shadow-md space-y-4\">\r\n+      {/* <div className=\"bg-white p-6 rounded-xl shadow-md space-y-4\">\r\n         <div>\r\n           <label className=\"block font-semibold mb-1 text-gray-700\">Email</label>\r\n           <input\r\n             className=\"border p-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-pink-400\"\r\n@@ -107,9 +200,9 @@\n           >\r\n             Add User\r\n           </button>\r\n         </div>\r\n-      </div>\r\n+      </div> */}\r\n     </AdminLayout>\r\n   );\r\n };\r\n \r\n"
                },
                {
                    "date": 1753702283888,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,58 +15,108 @@\n   const [loading, setLoading] = useState(false);\r\n   const [users, setUsers] = useState([]);\r\n   const token = localStorage.getItem(\"token\");\r\n \r\n-  // const handleAdd = async () => {\r\n-  //   if (!email.trim()) {\r\n-  //     toast.error('Email is required');\r\n-  //     return;\r\n-  //   }\r\n+  // Fetch users on component mount\r\n+  useEffect(() => {\r\n+    fetchUsers();\r\n+  }, []);\r\n \r\n-  //   const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n-  //   if (!emailRegex.test(email)) {\r\n-  //     toast.error('Please enter a valid email address');\r\n-  //     return;\r\n-  //   }\r\n+  const fetchUsers = async () => {\r\n+    try {\r\n+      const res = await fetch(`${import.meta.env.VITE_AUTH_API_URL}/admin/users`, {\r\n+        headers: {\r\n+          Authorization: `Bearer ${token}`,\r\n+        },\r\n+      });\r\n+      const data = await res.json();\r\n+      if (res.ok) {\r\n+        setUsers(data.users || []);\r\n+      } else {\r\n+        toast.error(data.error || \"Failed to fetch users\");\r\n+      }\r\n+    } catch (err) {\r\n+      toast.error(\"Server error\");\r\n+    }\r\n+  };\r\n \r\n-  //   if (!password.trim()) {\r\n-  //     toast.error('Password is required');\r\n-  //     return;\r\n-  //   }\r\n+  const handleAdd = async () => {\r\n+    if (!email.trim()) {\r\n+      toast.error('Email is required');\r\n+      return;\r\n+    }\r\n \r\n-  //   if (password.length < 6) {\r\n-  //     toast.error('Password must be at least 6 characters long');\r\n-  //     return;\r\n-  //   }\r\n+    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n+    if (!emailRegex.test(email)) {\r\n+      toast.error('Please enter a valid email address');\r\n+      return;\r\n+    }\r\n \r\n-  //   if (!role) {\r\n-  //     toast.error('Role is required');\r\n-  //     return;\r\n-  //   }\r\n+    if (!password.trim()) {\r\n+      toast.error('Password is required');\r\n+      return;\r\n+    }\r\n \r\n-  //   try {\r\n-  //     const response = await fetch(`${import.meta.env.VITE_AUTH_API_URL}/admin/add-user`, {\r\n-  //       method: \"POST\",\r\n-  //       headers: {\r\n-  //         Authorization: `Bearer ${token}`,\r\n-  //         \"Content-Type\": \"application/json\"\r\n-  //       },\r\n-  //       body: JSON.stringify({ email, password, role }),\r\n-  //     });\r\n+    if (password.length < 6) {\r\n+      toast.error('Password must be at least 6 characters long');\r\n+      return;\r\n+    }\r\n \r\n-  //     if (response.ok) {\r\n-  //       toast.success(`User with role \"${role}\" added successfully!`);\r\n-  //       setEmail(\"\");\r\n-  //       setPassword(\"\");\r\n-  //       setRole(\"cashier\");\r\n-  //     } else {\r\n-  //       const errorData = await response.json();\r\n-  //       toast.error(`Failed to add user: ${errorData.error || 'Unknown error'}`);\r\n-  //     }\r\n-  //   } catch (error) {\r\n-  //     toast.error('Network error occurred while adding user');\r\n-  //   }\r\n-  // };\r\n+    if (!role) {\r\n+      toast.error('Role is required');\r\n+      return;\r\n+    }\r\n+\r\n+    setLoading(true);\r\n+    try {\r\n+      const response = await fetch(`${import.meta.env.VITE_AUTH_API_URL}/admin/add-user`, {\r\n+        method: \"POST\",\r\n+        headers: {\r\n+          Authorization: `Bearer ${token}`,\r\n+          \"Content-Type\": \"application/json\"\r\n+        },\r\n+        body: JSON.stringify({ email, password, role }),\r\n+      });\r\n+\r\n+      const data = await response.json();\r\n+      if (response.ok) {\r\n+        toast.success(`User with role \"${role}\" added successfully!`);\r\n+        setEmail(\"\");\r\n+        setPassword(\"\");\r\n+        setRole(\"cashier\");\r\n+        setShowAddForm(false);\r\n+        fetchUsers(); // Refresh the user list\r\n+      } else {\r\n+        toast.error(`Failed to add user: ${data.error || 'Unknown error'}`);\r\n+      }\r\n+    } catch (error) {\r\n+      toast.error('Network error occurred while adding user');\r\n+    } finally {\r\n+      setLoading(false);\r\n+    }\r\n+  };\r\n+\r\n+  const handleDeleteUser = async (userId) => {\r\n+    if (!confirm('Are you sure you want to delete this user?')) return;\r\n+    \r\n+    try {\r\n+      const res = await fetch(`${import.meta.env.VITE_AUTH_API_URL}/admin/users/${userId}`, {\r\n+        method: \"DELETE\",\r\n+        headers: {\r\n+          Authorization: `Bearer ${token}`,\r\n+        },\r\n+      });\r\n+      const data = await res.json();\r\n+      if (res.ok) {\r\n+        toast.success(\"User deleted successfully\");\r\n+        fetchUsers(); // Refresh the user list\r\n+      } else {\r\n+        toast.error(data.error || \"Failed to delete user\");\r\n+      }\r\n+    } catch (err) {\r\n+      toast.error(\"Server error\");\r\n+    }\r\n+  };\r\n   const rolesData = [\r\n     {\r\n       role: \"User\",\r\n       accessUserDetails: true,\r\n"
                },
                {
                    "date": 1753702298838,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -138,9 +138,85 @@\n   ];\r\n \r\n   return (\r\n     <AdminLayout>\r\n-      <div className=\"bg-white rounded-xl p-4 shadow-sm max-w-6xl mx-auto mt-10\">\r\n+      <ToastContainer />\r\n+      <div className=\"bg-white rounded-xl p-6 shadow-md max-w-6xl mx-auto mt-4\">\r\n+        {/* Header */}\r\n+        <div className=\"flex justify-between items-center mb-6\">\r\n+          <h2 className=\"text-2xl font-bold text-gray-800\">Access Control</h2>\r\n+          <button\r\n+            onClick={() => setShowAddForm(!showAddForm)}\r\n+            className=\"flex items-center gap-2 bg-gradient-to-r from-yellow-400 to-yellow-600 hover:from-yellow-500 hover:to-yellow-700 text-white px-4 py-2 rounded-lg transition-all duration-200 shadow-md\"\r\n+          >\r\n+            <FaUserPlus />\r\n+            {showAddForm ? \"Cancel\" : \"Add New User\"}\r\n+          </button>\r\n+        </div>\r\n+\r\n+        {/* Add User Form */}\r\n+        {showAddForm && (\r\n+          <div className=\"bg-gray-50 p-6 rounded-xl mb-6 border border-gray-200\">\r\n+            <h3 className=\"text-lg font-semibold mb-4 text-gray-800\">Add New User</h3>\r\n+            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n+              <div>\r\n+                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Email</label>\r\n+                <input\r\n+                  type=\"email\"\r\n+                  value={email}\r\n+                  onChange={(e) => setEmail(e.target.value)}\r\n+                  placeholder=\"Enter email address\"\r\n+                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-yellow-400\"\r\n+                />\r\n+              </div>\r\n+              <div>\r\n+                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Password</label>\r\n+                <input\r\n+                  type=\"password\"\r\n+                  value={password}\r\n+                  onChange={(e) => setPassword(e.target.value)}\r\n+                  placeholder=\"Enter password\"\r\n+                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-yellow-400\"\r\n+                />\r\n+              </div>\r\n+              <div>\r\n+                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Role</label>\r\n+                <select\r\n+                  value={role}\r\n+                  onChange={(e) => setRole(e.target.value)}\r\n+                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-yellow-400\"\r\n+                >\r\n+                  <option value=\"cashier\">Cashier</option>\r\n+                  <option value=\"admin\">Admin</option>\r\n+                  <option value=\"user\">User</option>\r\n+                </select>\r\n+              </div>\r\n+            </div>\r\n+            <div className=\"flex justify-end mt-4\">\r\n+              <button\r\n+                onClick={handleAdd}\r\n+                disabled={loading}\r\n+                className=\"flex items-center gap-2 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white px-6 py-2 rounded-lg transition-all duration-200 shadow-md disabled:opacity-50\"\r\n+              >\r\n+                {loading ? (\r\n+                  <>\r\n+                    <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\r\n+                    Adding...\r\n+                  </>\r\n+                ) : (\r\n+                  <>\r\n+                    <FaPlus />\r\n+                    Add User\r\n+                  </>\r\n+                )}\r\n+              </button>\r\n+            </div>\r\n+          </div>\r\n+        )}\r\n+\r\n+        {/* Role Permissions Table */}\r\n+        <div className=\"mb-8\">\r\n+          <h3 className=\"text-lg font-semibold mb-4 text-gray-800\">Role Permissions</h3>\r\n         <table className=\"w-full text-sm text-left border-collapse\">\r\n           <thead>\r\n             <tr className=\"text-gray-700 text-sm font-semibold border-gray-200\">\r\n               <th className=\"px-4 py-3\">\r\n"
                },
                {
                    "date": 1753702323985,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -212,79 +212,133 @@\n             </div>\r\n           </div>\r\n         )}\r\n \r\n-        {/* Role Permissions Table */}\r\n+                {/* Role Permissions Table */}\r\n         <div className=\"mb-8\">\r\n           <h3 className=\"text-lg font-semibold mb-4 text-gray-800\">Role Permissions</h3>\r\n-        <table className=\"w-full text-sm text-left border-collapse\">\r\n-          <thead>\r\n-            <tr className=\"text-gray-700 text-sm font-semibold border-gray-200\">\r\n-              <th className=\"px-4 py-3\">\r\n-                <div className=\"flex items-center gap-1\">\r\n-                  ROLE <IoIosArrowRoundDown />\r\n-                </div>\r\n-              </th>\r\n-              <th className=\"px-4 py-3\">\r\n-                <div className=\"flex items-center gap-1\">\r\n-                  ACCESS TO USER DETAILS <IoIosArrowRoundDown />\r\n-                </div>\r\n-              </th>\r\n-              <th className=\"px-4 py-3\">\r\n-                <div className=\"flex items-center gap-1\">\r\n-                  ACCESS TO USER TRANSACTIONS <IoIosArrowRoundDown />\r\n-                </div>\r\n-              </th>\r\n-              <th className=\"px-4 py-3\">\r\n-                <div className=\"flex items-center gap-1\">\r\n-                  CMS <IoIosArrowRoundDown />\r\n-                </div>\r\n-              </th>\r\n-              <th className=\"px-4 py-3\">\r\n-                <div className=\"flex items-center gap-1\">\r\n-                  ACTIONS <IoIosArrowRoundDown />\r\n-                </div>\r\n-              </th>\r\n-            </tr>\r\n-          </thead>\r\n-          <tbody>\r\n-            {rolesData.map((item, index) => (\r\n-              <tr key={index} className=\"border-gray-200 hover:bg-gray-50\">\r\n-                <td className=\"px-4 py-3 text-gray-800\">{item.role}</td>\r\n-                <td className=\"px-4 py-3 text-center\">\r\n-                  {item.accessUserDetails ? (\r\n-                    <FaCheck className=\"text-green-500 inline\" />\r\n-                  ) : (\r\n-                    <FaTimes className=\"text-red-500 inline\" />\r\n-                  )}\r\n-                </td>\r\n-                <td className=\"px-4 py-3 text-center\">\r\n-                  {item.accessTransactions ? (\r\n-                    <FaCheck className=\"text-green-500 inline\" />\r\n-                  ) : (\r\n-                    <FaTimes className=\"text-red-500 inline\" />\r\n-                  )}\r\n-                </td>\r\n-                <td className=\"px-4 py-3 text-center\">\r\n-                  {item.cms ? (\r\n-                    <FaCheck className=\"text-green-500 inline\" />\r\n-                  ) : (\r\n-                    <FaTimes className=\"text-red-500 inline\" />\r\n-                  )}\r\n-                </td>\r\n-                <td className=\"px-4 py-3 flex items-center justify-center gap-2\">\r\n-                  <button className=\"p-2 rounded bg-blue-100 text-blue-700 hover:bg-blue-200\">\r\n-                    <RiEdit2Line />\r\n-                  </button>\r\n-                  <button className=\"p-2 rounded bg-red-100 text-red-600 hover:bg-red-200\">\r\n-                    <FaTrash />\r\n-                  </button>\r\n-                </td>\r\n+          <table className=\"w-full text-sm text-left border-collapse\">\r\n+            <thead>\r\n+              <tr className=\"text-gray-700 text-sm font-semibold border-gray-200\">\r\n+                <th className=\"px-4 py-3\">\r\n+                  <div className=\"flex items-center gap-1\">\r\n+                    ROLE <IoIosArrowRoundDown />\r\n+                  </div>\r\n+                </th>\r\n+                <th className=\"px-4 py-3\">\r\n+                  <div className=\"flex items-center gap-1\">\r\n+                    ACCESS TO USER DETAILS <IoIosArrowRoundDown />\r\n+                  </div>\r\n+                </th>\r\n+                <th className=\"px-4 py-3\">\r\n+                  <div className=\"flex items-center gap-1\">\r\n+                    ACCESS TO USER TRANSACTIONS <IoIosArrowRoundDown />\r\n+                  </div>\r\n+                </th>\r\n+                <th className=\"px-4 py-3\">\r\n+                  <div className=\"flex items-center gap-1\">\r\n+                    CMS <IoIosArrowRoundDown />\r\n+                  </div>\r\n+                </th>\r\n+                <th className=\"px-4 py-3\">\r\n+                  <div className=\"flex items-center gap-1\">\r\n+                    ACTIONS <IoIosArrowRoundDown />\r\n+                  </div>\r\n+                </th>\r\n               </tr>\r\n-            ))}\r\n-          </tbody>\r\n-        </table>\r\n+            </thead>\r\n+            <tbody>\r\n+              {rolesData.map((item, index) => (\r\n+                <tr key={index} className=\"border-gray-200 hover:bg-gray-50\">\r\n+                  <td className=\"px-4 py-3 text-gray-800\">{item.role}</td>\r\n+                  <td className=\"px-4 py-3 text-center\">\r\n+                    {item.accessUserDetails ? (\r\n+                      <FaCheck className=\"text-green-500 inline\" />\r\n+                    ) : (\r\n+                      <FaTimes className=\"text-red-500 inline\" />\r\n+                    )}\r\n+                  </td>\r\n+                  <td className=\"px-4 py-3 text-center\">\r\n+                    {item.accessTransactions ? (\r\n+                      <FaCheck className=\"text-green-500 inline\" />\r\n+                    ) : (\r\n+                      <FaTimes className=\"text-red-500 inline\" />\r\n+                    )}\r\n+                  </td>\r\n+                  <td className=\"px-4 py-3 text-center\">\r\n+                    {item.cms ? (\r\n+                      <FaCheck className=\"text-green-500 inline\" />\r\n+                    ) : (\r\n+                      <FaTimes className=\"text-red-500 inline\" />\r\n+                    )}\r\n+                  </td>\r\n+                  <td className=\"px-4 py-3 flex items-center justify-center gap-2\">\r\n+                    <button className=\"p-2 rounded bg-blue-100 text-blue-700 hover:bg-blue-200\">\r\n+                      <RiEdit2Line />\r\n+                    </button>\r\n+                    <button className=\"p-2 rounded bg-red-100 text-red-600 hover:bg-red-200\">\r\n+                      <FaTrash />\r\n+                    </button>\r\n+                  </td>\r\n+                </tr>\r\n+              ))}\r\n+            </tbody>\r\n+          </table>\r\n+        </div>\r\n+\r\n+        {/* Users List */}\r\n+        <div>\r\n+          <h3 className=\"text-lg font-semibold mb-4 text-gray-800\">Current Users</h3>\r\n+          <div className=\"overflow-x-auto\">\r\n+            <table className=\"w-full text-sm text-left border-collapse\">\r\n+              <thead>\r\n+                <tr className=\"text-gray-700 text-sm font-semibold border-gray-200 bg-gray-50\">\r\n+                  <th className=\"px-4 py-3\">Username</th>\r\n+                  <th className=\"px-4 py-3\">Email</th>\r\n+                  <th className=\"px-4 py-3\">Role</th>\r\n+                  <th className=\"px-4 py-3\">Status</th>\r\n+                  <th className=\"px-4 py-3\">Actions</th>\r\n+                </tr>\r\n+              </thead>\r\n+              <tbody>\r\n+                {users.map((user) => (\r\n+                  <tr key={user._id} className=\"border-gray-200 hover:bg-gray-50\">\r\n+                    <td className=\"px-4 py-3 text-gray-800\">{user.username}</td>\r\n+                    <td className=\"px-4 py-3 text-gray-600\">{user.email}</td>\r\n+                    <td className=\"px-4 py-3\">\r\n+                      <span className={`inline-block px-2 py-1 rounded-full text-xs font-semibold ${\r\n+                        user.role === 'admin' ? 'bg-purple-100 text-purple-800' :\r\n+                        user.role === 'cashier' ? 'bg-blue-100 text-blue-800' :\r\n+                        'bg-gray-100 text-gray-800'\r\n+                      }`}>\r\n+                        {user.role}\r\n+                      </span>\r\n+                    </td>\r\n+                    <td className=\"px-4 py-3\">\r\n+                      <span className={`inline-block px-2 py-1 rounded-full text-xs font-semibold ${\r\n+                        user.blocked ? 'bg-red-100 text-red-800' : 'bg-green-100 text-green-800'\r\n+                      }`}>\r\n+                        {user.blocked ? 'Blocked' : 'Active'}\r\n+                      </span>\r\n+                    </td>\r\n+                    <td className=\"px-4 py-3 flex items-center gap-2\">\r\n+                      <button \r\n+                        onClick={() => handleDeleteUser(user._id)}\r\n+                        className=\"p-2 rounded bg-red-100 text-red-600 hover:bg-red-200 transition-colors\"\r\n+                        title=\"Delete User\"\r\n+                      >\r\n+                        <FaTrash />\r\n+                      </button>\r\n+                    </td>\r\n+                  </tr>\r\n+                ))}\r\n+              </tbody>\r\n+            </table>\r\n+          </div>\r\n+        </div>\r\n       </div>\r\n+    </AdminLayout>\r\n+  );\r\n \r\n       {/* <div className=\"bg-white p-6 rounded-xl shadow-md space-y-4\">\r\n         <div>\r\n           <label className=\"block font-semibold mb-1 text-gray-700\">Email</label>\r\n"
                },
                {
                    "date": 1753702333523,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -338,52 +338,9 @@\n       </div>\r\n     </AdminLayout>\r\n   );\r\n \r\n-      {/* <div className=\"bg-white p-6 rounded-xl shadow-md space-y-4\">\r\n-        <div>\r\n-          <label className=\"block font-semibold mb-1 text-gray-700\">Email</label>\r\n-          <input\r\n-            className=\"border p-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-pink-400\"\r\n-            placeholder=\"Email\"\r\n-            value={email}\r\n-            onChange={(e) => setEmail(e.target.value)}\r\n-          />\r\n-        </div>\r\n-\r\n-        <div>\r\n-          <label className=\"block font-semibold mb-1 text-gray-700\">Password</label>\r\n-          <input\r\n-            className=\"border p-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-pink-400\"\r\n-            placeholder=\"Password\"\r\n-            type=\"password\"\r\n-            value={password}\r\n-            onChange={(e) => setPassword(e.target.value)}\r\n-          />\r\n-        </div>\r\n-\r\n-        <div>\r\n-          <label className=\"block font-semibold mb-1 text-gray-700\">Role</label>\r\n-          <select\r\n-            className=\"border p-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-pink-400\"\r\n-            value={role}\r\n-            onChange={(e) => setRole(e.target.value)}\r\n-          >\r\n-            <option value=\"cashier\">Cashier</option>\r\n-            <option value=\"admin\">Admin</option>\r\n-          </select>\r\n-        </div>\r\n-\r\n-        <div className=\"flex justify-end\">\r\n-          <button\r\n-            className=\"bg-pink-500 hover:bg-pink-600 text-white px-6 py-2 rounded-lg transition shadow-md\"\r\n-            onClick={handleAdd}\r\n-          >\r\n-            Add User\r\n-          </button>\r\n-        </div>\r\n-      </div> */}\r\n-    </AdminLayout>\r\n+          </AdminLayout>\r\n   );\r\n };\r\n \r\n export default AccessControl;\r\n"
                },
                {
                    "date": 1753702340471,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -337,10 +337,7 @@\n         </div>\r\n       </div>\r\n     </AdminLayout>\r\n   );\r\n-\r\n-          </AdminLayout>\r\n-  );\r\n };\r\n \r\n export default AccessControl;\r\n"
                },
                {
                    "date": 1753703432844,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -238,13 +238,8 @@\n                   <div className=\"flex items-center gap-1\">\r\n                     CMS <IoIosArrowRoundDown />\r\n                   </div>\r\n                 </th>\r\n-                <th className=\"px-4 py-3\">\r\n-                  <div className=\"flex items-center gap-1\">\r\n-                    ACTIONS <IoIosArrowRoundDown />\r\n-                  </div>\r\n-                </th>\r\n               </tr>\r\n             </thead>\r\n             <tbody>\r\n               {rolesData.map((item, index) => (\r\n@@ -270,16 +265,8 @@\n                     ) : (\r\n                       <FaTimes className=\"text-red-500 inline\" />\r\n                     )}\r\n                   </td>\r\n-                  <td className=\"px-4 py-3 flex items-center justify-center gap-2\">\r\n-                    <button className=\"p-2 rounded bg-blue-100 text-blue-700 hover:bg-blue-200\">\r\n-                      <RiEdit2Line />\r\n-                    </button>\r\n-                    <button className=\"p-2 rounded bg-red-100 text-red-600 hover:bg-red-200\">\r\n-                      <FaTrash />\r\n-                    </button>\r\n-                  </td>\r\n                 </tr>\r\n               ))}\r\n             </tbody>\r\n           </table>\r\n"
                },
                {
                    "date": 1753704171327,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,9 +15,8 @@\n   const [loading, setLoading] = useState(false);\r\n   const [users, setUsers] = useState([]);\r\n   const token = localStorage.getItem(\"token\");\r\n \r\n-  // Fetch users on component mount\r\n   useEffect(() => {\r\n     fetchUsers();\r\n   }, []);\r\n \r\n"
                },
                {
                    "date": 1753704178109,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -82,9 +82,9 @@\n         setEmail(\"\");\r\n         setPassword(\"\");\r\n         setRole(\"cashier\");\r\n         setShowAddForm(false);\r\n-        fetchUsers(); // Refresh the user list\r\n+        fetchUsers(); \r\n       } else {\r\n         toast.error(`Failed to add user: ${data.error || 'Unknown error'}`);\r\n       }\r\n     } catch (error) {\r\n@@ -106,9 +106,9 @@\n       });\r\n       const data = await res.json();\r\n       if (res.ok) {\r\n         toast.success(\"User deleted successfully\");\r\n-        fetchUsers(); // Refresh the user list\r\n+        fetchUsers(); \r\n       } else {\r\n         toast.error(data.error || \"Failed to delete user\");\r\n       }\r\n     } catch (err) {\r\n"
                },
                {
                    "date": 1753704184019,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -151,9 +151,8 @@\n             {showAddForm ? \"Cancel\" : \"Add New User\"}\r\n           </button>\r\n         </div>\r\n \r\n-        {/* Add User Form */}\r\n         {showAddForm && (\r\n           <div className=\"bg-gray-50 p-6 rounded-xl mb-6 border border-gray-200\">\r\n             <h3 className=\"text-lg font-semibold mb-4 text-gray-800\">Add New User</h3>\r\n             <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n@@ -211,9 +210,8 @@\n             </div>\r\n           </div>\r\n         )}\r\n \r\n-                {/* Role Permissions Table */}\r\n         <div className=\"mb-8\">\r\n           <h3 className=\"text-lg font-semibold mb-4 text-gray-800\">Role Permissions</h3>\r\n           <table className=\"w-full text-sm text-left border-collapse\">\r\n             <thead>\r\n"
                },
                {
                    "date": 1753704189723,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -139,9 +139,8 @@\n   return (\r\n     <AdminLayout>\r\n       <ToastContainer />\r\n       <div className=\"bg-white rounded-xl p-6 shadow-md max-w-6xl mx-auto mt-4\">\r\n-        {/* Header */}\r\n         <div className=\"flex justify-between items-center mb-6\">\r\n           <h2 className=\"text-2xl font-bold text-gray-800\">Access Control</h2>\r\n           <button\r\n             onClick={() => setShowAddForm(!showAddForm)}\r\n@@ -268,9 +267,8 @@\n             </tbody>\r\n           </table>\r\n         </div>\r\n \r\n-        {/* Users List */}\r\n         <div>\r\n           <h3 className=\"text-lg font-semibold mb-4 text-gray-800\">Current Users</h3>\r\n           <div className=\"overflow-x-auto\">\r\n             <table className=\"w-full text-sm text-left border-collapse\">\r\n"
                }
            ],
            "date": 1751537683844,
            "name": "Commit-0",
            "content": "import React, { useState } from \"react\";\r\nimport AdminLayout from \"../components/AdminLayout\";\r\n\r\nconst AccessControl = () => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [role, setRole] = useState(\"cashier\");\r\n  const token = localStorage.getItem(\"token\");\r\n\r\n  const handleAdd = async () => {\r\n    await fetch(`${import.meta.env.VITE_AUTH_API_URL}/admin/add-user`, {\r\n      method: \"POST\",\r\n      headers: { Authorization: `Bearer ${token}`, \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ email, password, role }),\r\n    });\r\n    alert(\"User added!\");\r\n    setEmail(\"\");\r\n    setPassword(\"\");\r\n  };\r\n\r\n  return (\r\n    <AdminLayout>\r\n      <h1 className=\"text-2xl font-bold mb-4\">Access Control</h1>\r\n      <div className=\"mb-4\">\r\n        <input className=\"border p-2 mr-2\" placeholder=\"Email\" value={email} onChange={e => setEmail(e.target.value)} />\r\n        <input className=\"border p-2 mr-2\" placeholder=\"Password\" type=\"password\" value={password} onChange={e => setPassword(e.target.value)} />\r\n        <select className=\"border p-2 mr-2\" value={role} onChange={e => setRole(e.target.value)}>\r\n          <option value=\"cashier\">Cashier</option>\r\n          <option value=\"admin\">Admin</option>\r\n        </select>\r\n        <button className=\"bg-blue-500 text-white px-4 py-2 rounded\" onClick={handleAdd}>Add</button>\r\n      </div>\r\n    </AdminLayout>\r\n  );\r\n};\r\n\r\nexport default AccessControl;"
        }
    ]
}