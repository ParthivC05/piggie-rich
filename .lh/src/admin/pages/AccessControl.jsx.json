{
    "sourceFile": "src/admin/pages/AccessControl.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 4,
            "patches": [
                {
                    "date": 1751537683844,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1751544805651,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,19 +19,56 @@\n   };\r\n \r\n   return (\r\n     <AdminLayout>\r\n-      <h1 className=\"text-2xl font-bold mb-4\">Access Control</h1>\r\n-      <div className=\"mb-4\">\r\n-        <input className=\"border p-2 mr-2\" placeholder=\"Email\" value={email} onChange={e => setEmail(e.target.value)} />\r\n-        <input className=\"border p-2 mr-2\" placeholder=\"Password\" type=\"password\" value={password} onChange={e => setPassword(e.target.value)} />\r\n-        <select className=\"border p-2 mr-2\" value={role} onChange={e => setRole(e.target.value)}>\r\n-          <option value=\"cashier\">Cashier</option>\r\n-          <option value=\"admin\">Admin</option>\r\n-        </select>\r\n-        <button className=\"bg-blue-500 text-white px-4 py-2 rounded\" onClick={handleAdd}>Add</button>\r\n+      <div className=\"bg-gradient-to-br from-pink-100 to-pink-200 rounded-xl p-6 mb-8 shadow-inner\">\r\n+        <h1 className=\"text-3xl font-extrabold text-pink-800\">Access Control</h1>\r\n       </div>\r\n+\r\n+      <div className=\"bg-white p-6 rounded-xl shadow-md space-y-4\">\r\n+        <div>\r\n\\ No newline at end of file\n+          <label className=\"block font-semibold mb-1 text-gray-700\">Email</label>\r\n+          <input\r\n+            className=\"border p-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-pink-400\"\r\n+            placeholder=\"Email\"\r\n+            value={email}\r\n+            onChange={(e) => setEmail(e.target.value)}\r\n+          />\r\n+        </div>\r\n+\r\n+        <div>\r\n+          <label className=\"block font-semibold mb-1 text-gray-700\">Password</label>\r\n+          <input\r\n+            className=\"border p-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-pink-400\"\r\n+            placeholder=\"Password\"\r\n+            type=\"password\"\r\n+            value={password}\r\n+            onChange={(e) => setPassword(e.target.value)}\r\n+          />\r\n+        </div>\r\n+\r\n+        <div>\r\n+          <label className=\"block font-semibold mb-1 text-gray-700\">Role</label>\r\n+          <select\r\n+            className=\"border p-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-pink-400\"\r\n+            value={role}\r\n+            onChange={(e) => setRole(e.target.value)}\r\n+          >\r\n+            <option value=\"cashier\">Cashier</option>\r\n+            <option value=\"admin\">Admin</option>\r\n+          </select>\r\n+        </div>\r\n+\r\n+        <div className=\"flex justify-end\">\r\n+          <button\r\n+            className=\"bg-pink-500 hover:bg-pink-600 text-white px-6 py-2 rounded-lg transition shadow-md\"\r\n+            onClick={handleAdd}\r\n+          >\r\n+            Add User\r\n+          </button>\r\n+        </div>\r\n+      </div>\r\n     </AdminLayout>\r\n   );\r\n };\r\n \r\n-export default AccessControl;\n+export default AccessControl;\r\n"
                },
                {
                    "date": 1751602650170,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,6 @@\n import React, { useState } from \"react\";\r\n+import { toast } from 'react-toastify';\r\n import AdminLayout from \"../components/AdminLayout\";\r\n \r\n const AccessControl = () => {\r\n   const [email, setEmail] = useState(\"\");\r\n@@ -70,5 +71,5 @@\n     </AdminLayout>\r\n   );\r\n };\r\n \r\n-export default AccessControl;\n\\ No newline at end of file\n+export default AccessControl;\r\n"
                },
                {
                    "date": 1751602676618,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,16 +8,58 @@\n   const [role, setRole] = useState(\"cashier\");\r\n   const token = localStorage.getItem(\"token\");\r\n \r\n   const handleAdd = async () => {\r\n-    await fetch(`${import.meta.env.VITE_AUTH_API_URL}/admin/add-user`, {\r\n-      method: \"POST\",\r\n-      headers: { Authorization: `Bearer ${token}`, \"Content-Type\": \"application/json\" },\r\n-      body: JSON.stringify({ email, password, role }),\r\n-    });\r\n-    alert(\"User added!\");\r\n-    setEmail(\"\");\r\n-    setPassword(\"\");\r\n+    // Validation\r\n+    if (!email.trim()) {\r\n+      toast.error('Email is required');\r\n+      return;\r\n+    }\r\n+    \r\n+    // Email validation\r\n+    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n+    if (!emailRegex.test(email)) {\r\n+      toast.error('Please enter a valid email address');\r\n+      return;\r\n+    }\r\n+    \r\n+    if (!password.trim()) {\r\n+      toast.error('Password is required');\r\n+      return;\r\n+    }\r\n+    \r\n+    if (password.length < 6) {\r\n+      toast.error('Password must be at least 6 characters long');\r\n+      return;\r\n+    }\r\n+    \r\n+    if (!role) {\r\n+      toast.error('Role is required');\r\n+      return;\r\n+    }\r\n+    \r\n+    try {\r\n+      const response = await fetch(`${import.meta.env.VITE_AUTH_API_URL}/admin/add-user`, {\r\n+        method: \"POST\",\r\n+        headers: { \r\n+          Authorization: `Bearer ${token}`, \r\n+          \"Content-Type\": \"application/json\" \r\n+        },\r\n+        body: JSON.stringify({ email, password, role }),\r\n+      });\r\n+      \r\n+      if (response.ok) {\r\n+        toast.success(`User with role \"${role}\" added successfully!`);\r\n+        setEmail(\"\");\r\n+        setPassword(\"\");\r\n+        setRole(\"cashier\");\r\n+      } else {\r\n+        const errorData = await response.json();\r\n+        toast.error(`Failed to add user: ${errorData.error || 'Unknown error'}`);\r\n+      }\r\n+    } catch (error) {\r\n+      toast.error('Network error occurred while adding user');\r\n+    }\r\n   };\r\n \r\n   return (\r\n     <AdminLayout>\r\n"
                },
                {
                    "date": 1751622083465,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,9 +8,8 @@\n   const [role, setRole] = useState(\"cashier\");\r\n   const token = localStorage.getItem(\"token\");\r\n \r\n   const handleAdd = async () => {\r\n-    // Validation\r\n     if (!email.trim()) {\r\n       toast.error('Email is required');\r\n       return;\r\n     }\r\n"
                }
            ],
            "date": 1751537683844,
            "name": "Commit-0",
            "content": "import React, { useState } from \"react\";\r\nimport AdminLayout from \"../components/AdminLayout\";\r\n\r\nconst AccessControl = () => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [role, setRole] = useState(\"cashier\");\r\n  const token = localStorage.getItem(\"token\");\r\n\r\n  const handleAdd = async () => {\r\n    await fetch(`${import.meta.env.VITE_AUTH_API_URL}/admin/add-user`, {\r\n      method: \"POST\",\r\n      headers: { Authorization: `Bearer ${token}`, \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ email, password, role }),\r\n    });\r\n    alert(\"User added!\");\r\n    setEmail(\"\");\r\n    setPassword(\"\");\r\n  };\r\n\r\n  return (\r\n    <AdminLayout>\r\n      <h1 className=\"text-2xl font-bold mb-4\">Access Control</h1>\r\n      <div className=\"mb-4\">\r\n        <input className=\"border p-2 mr-2\" placeholder=\"Email\" value={email} onChange={e => setEmail(e.target.value)} />\r\n        <input className=\"border p-2 mr-2\" placeholder=\"Password\" type=\"password\" value={password} onChange={e => setPassword(e.target.value)} />\r\n        <select className=\"border p-2 mr-2\" value={role} onChange={e => setRole(e.target.value)}>\r\n          <option value=\"cashier\">Cashier</option>\r\n          <option value=\"admin\">Admin</option>\r\n        </select>\r\n        <button className=\"bg-blue-500 text-white px-4 py-2 rounded\" onClick={handleAdd}>Add</button>\r\n      </div>\r\n    </AdminLayout>\r\n  );\r\n};\r\n\r\nexport default AccessControl;"
        }
    ]
}