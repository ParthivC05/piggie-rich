{
    "sourceFile": "src/pages/DepositPage.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 7,
            "patches": [
                {
                    "date": 1751354743875,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1751355125552,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,14 +6,25 @@\n   const [amount, setAmount] = useState(\"\");\r\n   const [selectedPlatform, setSelectedPlatform] = useState(\"\");\r\n   const [paid, setPaid] = useState(false);\r\n \r\n-  // Fetch platforms\r\n+  // Fetch platforms from the same API as GameList\r\n   useEffect(() => {\r\n-    fetch(\"https://your-api.com/platforms\") // Replace with your actual API URL\r\n-      .then((res) => res.json())\r\n-      .then((data) => setPlatforms(data.data))\r\n-      .catch((err) => console.error(\"Failed to fetch platforms\", err));\r\n+    const fetchPlatforms = async () => {\r\n+      try {\r\n+        const res = await fetch(\r\n+          `https://slotslaunch.com/api/games?token=${import.meta.env.VITE_API_TOKEN}&public=1`\r\n+        );\r\n+        const data = await res.json();\r\n+        if (data?.data) setPlatforms(data.data);\r\n+        else setPlatforms([]);\r\n+      } catch (err) {\r\n+        console.error(\"Failed to fetch platforms\", err);\r\n+        setPlatforms([]);\r\n+      }\r\n+    };\r\n+\r\n+    fetchPlatforms();\r\n   }, []);\r\n \r\n   const isReadyToPay = amount && selectedPlatform;\r\n \r\n@@ -45,10 +56,10 @@\n             onChange={(e) => setSelectedPlatform(e.target.value)}\r\n           >\r\n             <option value=\"\">-- Select Platform --</option>\r\n             {platforms.map((platform, i) => (\r\n-              <option key={i} value={platform.name}>\r\n-                {platform.name}\r\n+              <option key={platform.id || i} value={platform.name || platform.title}>\r\n+                {platform.name || platform.title}\r\n               </option>\r\n             ))}\r\n           </select>\r\n         </div>\r\n@@ -111,5 +122,5 @@\n     </PayPalScriptProvider>\r\n   );\r\n };\r\n \r\n-export default DepositPage;\r\n+export\n\\ No newline at end of file\n"
                },
                {
                    "date": 1751355131888,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -122,5 +122,5 @@\n     </PayPalScriptProvider>\r\n   );\r\n };\r\n \r\n-export\n\\ No newline at end of file\n+export default DepositPage;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1751355160800,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,9 +28,9 @@\n \r\n   const isReadyToPay = amount && selectedPlatform;\r\n \r\n   return (\r\n-    <PayPalScriptProvider options={{ \"client-id\": \"YOUR_PAYPAL_CLIENT_ID\" }}>\r\n+    <PayPalScriptProvider options={{ \"client-id\": \"\" }}>\r\n       <div className=\"min-h-screen bg-gray-100 flex flex-col md:flex-row justify-center items-start p-4 md:p-10 gap-10\">\r\n         {/* Deposit Form */}\r\n         <div className=\"bg-white rounded-lg shadow-md p-6 w-full md:w-1/2\">\r\n           <h2 className=\"text-xl font-bold mb-2\">Piggie Rich Deposit</h2>\r\n"
                },
                {
                    "date": 1751355181408,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,9 +28,9 @@\n \r\n   const isReadyToPay = amount && selectedPlatform;\r\n \r\n   return (\r\n-    <PayPalScriptProvider options={{ \"client-id\": \"\" }}>\r\n+    <PayPalScriptProvider options={{ \"client-id\": \"AWW61fl8Lnp6iYnjG6uKBmUkgRP3-uEZ33F1k6QBxycad7RHsLo_4n6mHKzEQHNRYbj0xCkbvncjm-IC\" }}>\r\n       <div className=\"min-h-screen bg-gray-100 flex flex-col md:flex-row justify-center items-start p-4 md:p-10 gap-10\">\r\n         {/* Deposit Form */}\r\n         <div className=\"bg-white rounded-lg shadow-md p-6 w-full md:w-1/2\">\r\n           <h2 className=\"text-xl font-bold mb-2\">Piggie Rich Deposit</h2>\r\n"
                },
                {
                    "date": 1751360314819,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,9 +6,8 @@\n   const [amount, setAmount] = useState(\"\");\r\n   const [selectedPlatform, setSelectedPlatform] = useState(\"\");\r\n   const [paid, setPaid] = useState(false);\r\n \r\n-  // Fetch platforms from the same API as GameList\r\n   useEffect(() => {\r\n     const fetchPlatforms = async () => {\r\n       try {\r\n         const res = await fetch(\r\n"
                },
                {
                    "date": 1751360321327,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -29,16 +29,14 @@\n \r\n   return (\r\n     <PayPalScriptProvider options={{ \"client-id\": \"AWW61fl8Lnp6iYnjG6uKBmUkgRP3-uEZ33F1k6QBxycad7RHsLo_4n6mHKzEQHNRYbj0xCkbvncjm-IC\" }}>\r\n       <div className=\"min-h-screen bg-gray-100 flex flex-col md:flex-row justify-center items-start p-4 md:p-10 gap-10\">\r\n-        {/* Deposit Form */}\r\n         <div className=\"bg-white rounded-lg shadow-md p-6 w-full md:w-1/2\">\r\n           <h2 className=\"text-xl font-bold mb-2\">Piggie Rich Deposit</h2>\r\n           <p className=\"text-sm text-gray-600 mb-4\">\r\n             Enter your deposit amount and select at least one platform.\r\n           </p>\r\n \r\n-          {/* Amount Input */}\r\n           <label className=\"block mb-2 font-medium\">Amount of Deposit</label>\r\n           <input\r\n             type=\"number\"\r\n             className=\"w-full border rounded px-4 py-2 mb-4\"\r\n@@ -46,9 +44,8 @@\n             onChange={(e) => setAmount(e.target.value)}\r\n             placeholder=\"$\"\r\n           />\r\n \r\n-          {/* Platform Dropdown */}\r\n           <label className=\"block mb-2 font-medium\">Select Platform</label>\r\n           <select\r\n             className=\"w-full border rounded px-4 py-2\"\r\n             value={selectedPlatform}\r\n"
                },
                {
                    "date": 1751360329414,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -59,9 +59,8 @@\n             ))}\r\n           </select>\r\n         </div>\r\n \r\n-        {/* Order Summary */}\r\n         <div className=\"bg-white rounded-lg shadow-md p-6 w-full md:w-1/3\">\r\n           <h3 className=\"text-lg font-semibold mb-4\">Order Summary</h3>\r\n           <div className=\"border p-4 rounded mb-4\">\r\n             <div className=\"flex justify-between mb-4\">\r\n@@ -70,9 +69,8 @@\n                 ${amount || \"0.00\"} USD\r\n               </span>\r\n             </div>\r\n \r\n-            {/* PayPal Button */}\r\n             {isReadyToPay ? (\r\n               <PayPalButtons\r\n                 style={{ layout: \"vertical\", color: \"gold\", shape: \"rect\", label: \"paypal\" }}\r\n                 forceReRender={[amount, selectedPlatform]}\r\n@@ -91,9 +89,9 @@\n                 onApprove={(data, actions) => {\r\n                   return actions.order.capture().then((details) => {\r\n                     setPaid(true);\r\n                     alert(`Transaction completed by ${details.payer.name.given_name}`);\r\n-                    // You can also call your backend here to save the transaction\r\n+                    \r\n                   });\r\n                 }}\r\n                 onError={(err) => {\r\n                   console.error(\"PayPal Checkout Error\", err);\r\n"
                }
            ],
            "date": 1751354743875,
            "name": "Commit-0",
            "content": "import React, { useEffect, useState } from \"react\";\r\nimport { PayPalScriptProvider, PayPalButtons } from \"@paypal/react-paypal-js\";\r\n\r\nconst DepositPage = () => {\r\n  const [platforms, setPlatforms] = useState([]);\r\n  const [amount, setAmount] = useState(\"\");\r\n  const [selectedPlatform, setSelectedPlatform] = useState(\"\");\r\n  const [paid, setPaid] = useState(false);\r\n\r\n  // Fetch platforms\r\n  useEffect(() => {\r\n    fetch(\"https://your-api.com/platforms\") // Replace with your actual API URL\r\n      .then((res) => res.json())\r\n      .then((data) => setPlatforms(data.data))\r\n      .catch((err) => console.error(\"Failed to fetch platforms\", err));\r\n  }, []);\r\n\r\n  const isReadyToPay = amount && selectedPlatform;\r\n\r\n  return (\r\n    <PayPalScriptProvider options={{ \"client-id\": \"YOUR_PAYPAL_CLIENT_ID\" }}>\r\n      <div className=\"min-h-screen bg-gray-100 flex flex-col md:flex-row justify-center items-start p-4 md:p-10 gap-10\">\r\n        {/* Deposit Form */}\r\n        <div className=\"bg-white rounded-lg shadow-md p-6 w-full md:w-1/2\">\r\n          <h2 className=\"text-xl font-bold mb-2\">Piggie Rich Deposit</h2>\r\n          <p className=\"text-sm text-gray-600 mb-4\">\r\n            Enter your deposit amount and select at least one platform.\r\n          </p>\r\n\r\n          {/* Amount Input */}\r\n          <label className=\"block mb-2 font-medium\">Amount of Deposit</label>\r\n          <input\r\n            type=\"number\"\r\n            className=\"w-full border rounded px-4 py-2 mb-4\"\r\n            value={amount}\r\n            onChange={(e) => setAmount(e.target.value)}\r\n            placeholder=\"$\"\r\n          />\r\n\r\n          {/* Platform Dropdown */}\r\n          <label className=\"block mb-2 font-medium\">Select Platform</label>\r\n          <select\r\n            className=\"w-full border rounded px-4 py-2\"\r\n            value={selectedPlatform}\r\n            onChange={(e) => setSelectedPlatform(e.target.value)}\r\n          >\r\n            <option value=\"\">-- Select Platform --</option>\r\n            {platforms.map((platform, i) => (\r\n              <option key={i} value={platform.name}>\r\n                {platform.name}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        {/* Order Summary */}\r\n        <div className=\"bg-white rounded-lg shadow-md p-6 w-full md:w-1/3\">\r\n          <h3 className=\"text-lg font-semibold mb-4\">Order Summary</h3>\r\n          <div className=\"border p-4 rounded mb-4\">\r\n            <div className=\"flex justify-between mb-4\">\r\n              <span className=\"font-medium\">Total</span>\r\n              <span className=\"font-semibold\">\r\n                ${amount || \"0.00\"} USD\r\n              </span>\r\n            </div>\r\n\r\n            {/* PayPal Button */}\r\n            {isReadyToPay ? (\r\n              <PayPalButtons\r\n                style={{ layout: \"vertical\", color: \"gold\", shape: \"rect\", label: \"paypal\" }}\r\n                forceReRender={[amount, selectedPlatform]}\r\n                createOrder={(data, actions) => {\r\n                  return actions.order.create({\r\n                    purchase_units: [\r\n                      {\r\n                        amount: {\r\n                          value: parseFloat(amount).toFixed(2),\r\n                        },\r\n                        description: `Deposit for ${selectedPlatform}`,\r\n                      },\r\n                    ],\r\n                  });\r\n                }}\r\n                onApprove={(data, actions) => {\r\n                  return actions.order.capture().then((details) => {\r\n                    setPaid(true);\r\n                    alert(`Transaction completed by ${details.payer.name.given_name}`);\r\n                    // You can also call your backend here to save the transaction\r\n                  });\r\n                }}\r\n                onError={(err) => {\r\n                  console.error(\"PayPal Checkout Error\", err);\r\n                  alert(\"Payment failed.\");\r\n                }}\r\n              />\r\n            ) : (\r\n              <p className=\"text-red-500 text-sm\">\r\n                Please enter amount and select a platform to proceed.\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          <p className=\"text-xs text-gray-400\">\r\n            This product is offered and sold by the seller. PayPal is not responsible for item\r\n            quality or delivery. <br />\r\n            <a href=\"#\" className=\"text-blue-600 underline\">Report this link</a> | <a href=\"#\" className=\"text-blue-600 underline\">Privacy</a>\r\n          </p>\r\n          <p className=\"text-xs text-gray-400 mt-2 text-center\">Powered by PayPal</p>\r\n        </div>\r\n      </div>\r\n    </PayPalScriptProvider>\r\n  );\r\n};\r\n\r\nexport default DepositPage;\r\n"
        }
    ]
}